{
  "resourceType": "StructureDefinition",
  "id": "CustomPatient",
  "url": "http://localhost/fhir/StructureDefinition/CustomPatient",
  "name": "Custom Patient",
  "status": "draft",
  "kind": "resource",
  "abstract": false,
  "contextType": "resource",
  "context": ["Patient"],
  "type": "Patient",
  "baseDefinition": "http://build.fhir.org/patient.profile.json",
  "derivation": "constraint",
  "snapshot": {
    "element": [{
      "id": "1",
      "path": "Patient"
    }, {
      "id": "2",
      "path": "Patient.name",
      "short": "name",
      "definition": "SHALL contain exactly one [1..1] name.",
      "min": 1,
      "max": "1"
    }, {
      "id": "Patient.communication",
      "path": "Patient.communication",
      "short": "A list of Languages which may be used to communicate with the patient about his or her health",
      "definition": "Languages which may be used to communicate with the patient about his or her health.",
      "comments": "If no language is specified, this *implies* that the default local language is spoken.  If you need to convey proficiency for multiple modes then you need multiple Patient.Communication associations.   For animals, language is not a relevant field, and should be absent from the instance. If the Patient does not speak the default local language, then the Interpreter Required Standard can be used to explicitly declare that an interpreter is required.",
      "requirements": "If a patient does not speak the local language, interpreters may be required, so languages spoken and proficiency is an important things to keep track of both for patient and other persons of interest.",
      "min": 0,
      "max": "*",
      "type": [
        {
          "code": "BackboneElement"
        }
      ],
      "constraint": [
        {
          "key": "ele-1",
          "severity": "error",
          "human": "All FHIR elements must have a @value or children",
          "expression": "children().count() > id.count()",
          "xpath": "@value|f:*|h:div",
          "source": "Element"
        }
      ],
      "mapping": [
        {
          "identity": "rim",
          "map": "LanguageCommunication"
        },
        {
          "identity": "cda",
          "map": "patient.languageCommunication"
        }
      ]
    }, {
      "id": "Patient.communication.language",
      "path": "Patient.communication.language",
      "short": "The language which can be used to communicate with the patient about his or her health",
      "definition": "The ISO-639-1 alpha 2 code in lower case for the language, optionally followed by a hyphen and the ISO-3166-1 alpha 2 code for the region in upper case; e.g. \"en\" for English, or \"en-US\" for American English versus \"en-EN\" for England English.",
      "comments": "The structure aa-BB with this exact casing is one the most widely used notations for locale. However not all systems actually code this but instead have it as free text. Hence CodeableConcept instead of code as the data type.",
      "requirements": "Most systems in multilingual countries will want to convey language. Not all systems actually need the regional dialect.",
      "min": 1,
      "max": "1",
      "type": [
        {
          "code": "CodeableConcept"
        }
      ],
      "binding": {
        "extension": [
          {
            "url": "http://hl7.org/fhir/StructureDefinition/elementdefinition-maxValueSet",
            "valueReference": {
              "reference": "http://hl7.org/fhir/ValueSet/all-languages"
            }
          }
        ],
        "strength": "extensible",
        "description": "A human language.",
        "valueSetReference": {
          "reference": "http://hl7.org/fhir/ValueSet/languages"
        }
      },
      "mapping": [
        {
          "identity": "v2",
          "map": "PID-15, LAN-2"
        },
        {
          "identity": "rim",
          "map": "player[classCode=PSN|ANM and determinerCode=INSTANCE]/languageCommunication/code"
        },
        {
          "identity": "cda",
          "map": ".languageCode"
        }
      ]
    }]
  }
}
